var oldGeoDash=window.GeoDash,GeoDash={};GeoDash.version="0.1-dev",GeoDash.noConflict=function(){return window.GeoDash=oldGeoDash,this},window.GeoDash=GeoDash,GeoDash.Chart=function(t,a){this.el=t,this.options=a,this.drawChart()},GeoDash.Chart.prototype.drawChart=function(){},GeoDash.Chart.prototype.update=function(){},GeoDash.BarChart=function(t,a){GeoDash.Chart.call(this,t,a)},GeoDash.BarChart.prototype=new GeoDash.Chart,GeoDash.BarChart.prototype.constructor=GeoDash.BarChart,GeoDash.BarChart.prototype.drawChart=function(){this.margin={top:20,right:20,bottom:30,left:40},this.width=$(this.el).width()-this.margin.left-this.margin.right,this.height=$(this.el).height()-this.margin.top-this.margin.bottom,this.formatPercent=d3.format(".0%"),this.x=d3.scale.ordinal().rangeRoundBands([0,this.width],.05),this.y=d3.scale.linear().range([this.height,0]),this.xAxis=d3.svg.axis().scale(this.x).orient("bottom").tickFormat(function(){return""}),this.yAxis=d3.svg.axis().scale(this.y).orient("left").ticks(1).tickFormat(this.formatPercent),this.svg=d3.select(this.el).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")")},GeoDash.BarChart.prototype.update=function(t){var a=this,i=this.options.y,r=this.options.x;t.forEach(function(t){t[i]=+t[i]}),this.x.domain(t.map(function(t){return t[r]})),this.y.domain([0,d3.max(t,function(t){return t[i]})]),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Frequency"),this.svg.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",function(t){return a.x(t[r])}).attr("width",a.x.rangeBand()).attr("y",function(t){return a.y(t[i])}).attr("height",function(t){return a.height-a.y(t[i])}).style("fill",this.options.barColor)};