var oldGeoDash=window.GeoDash,GeoDash={};GeoDash.version="0.1-dev",GeoDash.noConflict=function(){return window.GeoDash=oldGeoDash,this},window.GeoDash=GeoDash,GeoDash.Chart=function(t,i){this.el=t,this.options=i,this.drawChart()},GeoDash.Chart.prototype.drawChart=function(){this.margin={top:20,right:20,bottom:30,left:40},this.width=300-this.margin.left-this.margin.right,this.height=200-this.margin.top-this.margin.bottom,this.formatPercent=d3.format(".0%"),this.x=d3.scale.ordinal().rangeRoundBands([0,this.width],.05),this.y=d3.scale.linear().range([this.height,0]),this.xAxis=d3.svg.axis().scale(this.x).orient("bottom").tickFormat(function(){return""}),this.yAxis=d3.svg.axis().scale(this.y).orient("left").ticks(1).tickFormat(this.formatPercent),this.svg=d3.select(this.el).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")")},GeoDash.Chart.prototype.update=function(t){var i=this,a=this.options.y,s=this.options.x;t.forEach(function(t){t[a]=+t[a]}),this.x.domain(t.map(function(t){return t[s]})),this.y.domain([0,d3.max(t,function(t){return t[a]})]),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Frequency"),this.svg.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",function(t){return i.x(t[s])}).attr("width",i.x.rangeBand()).attr("y",function(t){return i.y(t[a])}).attr("height",function(t){return i.height-i.y(t[a])}).style("fill",this.options.barColor)};